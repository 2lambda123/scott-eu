<?xml version="1.0"?>
<launch>

  <arg name="cmd_vel_mux" default="false"/>

  <node name="map_server" pkg="map_server" type="map_server" args="$(find turtlebot2i_mapping)/maps/map.yaml">
    <param name="frame_id" value="/map"/>
  </node>

  <include file="$(find turtlebot2i_navigation)/launch/turtlebot2i_navigation_demo.launch">
    <arg name="robot_name" value="turtlebot2i"/>
    <arg name="moveit" value="false"/>
    <arg name="cmd_vel_mux" value="$(arg cmd_vel_mux)"/>
  </include>
  <include file="$(find kobuki_node)/launch/minimal.launch" />
  <!-- <include file="$(find sweep_ros)/launch/sweep2scan.launch" />  --> <!-- old lidar -->
  <!-- <include file="$(find turtlebot2i_navigation)/launch/turtlebot2i_keyop_demo.launch" /> -->
  <node pkg="turtlebot2i_safety" name="run_demo"        type="run_demo.py"     output="screen"/>
  <node pkg="turtlebot2i_safety" name="rm_fls_demo"     type="rm_fls_demo.py"  output="screen"/>
  <node name="ds4_joystick" pkg="joy" type="joy_node">
    <param name="dev" value="/dev/input/js0" />
  </node>
  <include file="$(find astra_camera)/launch/astrapro.launch"/>

  <node name="hokuyo" pkg="hokuyo_node" type="hokuyo_node" respawn="false" output="screen">
    <remap from="scan" to="turtlebot2i/lidar/scan"/>
   
    <param name="calibrate_time" type="bool" value="false"/> 
    
    <param name="port" type="string" value="/dev/ttyACM0"/> 
  
    <param name="intensity" type="bool" value="false"/>
  
    <param name="use_inf" type="bool" value="false"/>

    <param name="target_frame" type="string" value="turtlebot2i/lidar/scan"/>
  </node> 

  <!-- <node name="sick_tim551_2050001" pkg="sick_tim" type="sick_tim551_2050001" respawn="false" output="screen">
    <remap from="scan" to="turtlebot2i/lidar/scan"/>
    <param name="frame_id" type="str" value="turtlebot2i/lidar/scan" />
  </node> -->

  <node pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_filter">
        <rosparam command="load" file="$(find hokuyo_node)/cfg/hokuyo_config.yaml" /> 
        
  </node>
  
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find turtlebot2i_navigation)/rviz/navigation_single_robot.rviz" />

</launch>
